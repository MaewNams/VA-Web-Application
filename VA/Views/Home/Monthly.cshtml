@using VA.Models;
@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_test.cshtml";
}
@{
    IEnumerable<Appointment> dAppWait = (IEnumerable<Appointment>)ViewData["DialyAppointmentWait"];
    IEnumerable<Appointment> dAppCom = (IEnumerable<Appointment>)ViewData["DialyAppointmentCom"];
    IEnumerable<Appointment> mAppWait = (IEnumerable<Appointment>)ViewData["MonthAppointmentWait"];
    IEnumerable<Appointment> mAppCom = (IEnumerable<Appointment>)ViewData["MonthAppointmentCom"];
}
<div class="ui vertical left visible sidebar menu" style="font-size:18px">
    <div class="item" style="font-family: 'Raleway', sans-serif; font-size:48px;text-align:center;font-weight:bold;margin-bottom:55px;color:white;background-color:teal">

        VA

    </div>

    <div class="ui secondary vertical pointing massive menu" style="color:darkgray">
        <a class="item" href="/VA/Home/" style="font-size:16px;">
            <i class="home icon" style="float:left;padding-right:25px"></i>Home
        </a>
        <a class="active item" style="font-size:16px;color:#00B5AD;border-left: 5px #00B5AD solid;">
            <i class="calendar icon" style="float:left;padding-right:25px"></i>
            Appointment
        </a>
        <a class="item" href="/VA/Home/Member/" style="font-size:16px">
            <i class="user icon" style="float:left;padding-right:25px"></i>
            Member
        </a>
        <a class="item" href="/VA/Home/PetSpecie" style="font-size:16px;">
            <i class="setting icon" style="float:left;padding-right:25px"></i>
            Pet specie
        </a>
        <a class="item" href="/VA/Home/VASetting" style="font-size:16px;">
            <i class="setting icon" style="float:left;padding-right:25px"></i>
            Clinic Setting
        </a>
    </div>
</div>
<div class="pusher">

    <div class="ui secondary pointing massive menu" style="background-color:white;padding-right:270px;border:none!important;font-size:16px">
        <div class="item">
            <i class="paw icon"></i> Hello, administrator  <text style="color:teal;padding-left:5px">  @Session["username"].ToString() </text>
        </div>
        <div class="right menu">
            <a style="font-family: 'Lato', 'Helvetica Neue', Arial, Helvetica, sans-serif;" href="/VA/Home/Logout" class="ui item">
                Logout
            </a>
        </div>
    </div>
    <div class="ui padded segment" style="margin-right: 18.5em;background-color:#FAFAFA;border:0px;box-shadow:none">
        <h2 class="ui header" style="margin-bottom: 25px;">
            <div class="content">
                <i class="time icon"></i>   @ViewBag.MonthName, @ViewBag.Year
                <div class="sub header">Total appointment in the month : @{int numApp = mAppWait.Count() + mAppCom.Count(); } @numApp appointments</div>
            </div>
            <button class="ui right floated teal button  call_create_member_modal">
                <i class="plus icon"></i>
                Create new member
            </button>
        </h2>
        <div class="ui modal" id="create_member_modal">
            <div class="header">Create member account</div>
            <div class="content">
                <form class="ui form">
                    <div class="inline fields">
                        <div class="six wide field">
                            <label>Name</label>
                            <input type="text" placeholder="Name" name="name" id="create_name">
                        </div>
                        <div class="six wide field">
                            <label>Surname</label>
                            <input type="text" placeholder="Surname" name="surname" id="create_surname">
                        </div>
                    </div>
                    <div class="inline fields">
                        <div class="six wide field">
                            <label>Address</label>
                            <input type="text" placeholder="Address" name="address" id="create_address">
                        </div>
                        <div class="six wide field">
                            <label>Phone number</label>
                            <input type="text" placeholder="Phone number" name="phoneNumber" id="create_phoneNumber">
                        </div>
                    </div>
                    <div class="actions">
                        <div class="ui teal button confirm_create_member_button" style="float: right">Submit</div>
                        <div class="ui deny button" style="float: right">Cancel</div>
                    </div>
                    <br /><br />
                </form>
            </div>
        </div>
        <div class="ui secondary pointing menu">
            <a class="item" href="/VA/Home/Appointment">Daily </a>
            <a class="item active" data-tab="second">Monthly </a>

            <div class="right menu">
                <div class="ui form">
                    <div class="inline fields">

                        <select name="condition" class="ui dropdown" id="select_condition">
                            <option value="idCode">Member ID Code</option>
                            <option value="name">Member name</option>
                            <option value="address">Addresse</option>
                            <option value="phone">Phone number</option>
                        </select>

                        <div class="ui icon input" style="margin-left:15px;">
                            <input type="text" placeholder="Search..." id="search_keyword">
                            <i class="inverted circular search link icon search_button"></i>
                        </div>
                    </div>

                </div>

            </div>
        </div>



        <div class="ui active tab segment" data-tab="second">

            <div class="ui calendar all_app_calendar">
                <div class="ui input left icon">
                    <i class="time icon"></i>
                    <input type="text" placeholder="'@ViewBag.DateTime'" value="'@ViewBag.DateTime.ToString("y")'">
                </div>
            </div>

            <div class="ui segment">
                @* Waiting monthly appointment *@
                <div class="ui teal large label">
                    Waiting appointment
                </div>
                @if (mAppWait != null && mAppWait.ToList().Count > 0)
                {
                    <table class="ui single line selectable  table" style="border:none!important">
                        <thead>
                            <tr>
                                <th class="one wide">Date</th>
                                <th class="two wide">Member name</th>
                                <th class="two wide">Pet name</th>
                                <th class="four wide">Detail</th>
                                <th class="one wide">Status</th>
                                <th class="two wide" style="text-align:center">View</th>
                                <th class="two wide" style="text-align:center">Edit</th>
                                <th class="two wide">Delete</th>
                            </tr>
                        </thead>
                        <tbody>

                            @{

                                foreach (var app in mAppWait)
                                {
                                    <tr>
                                        <td>@app.date.ToString("d")</td>
                                        <td>@app.Member.name  @app.Member.surname</td>
                                        <td> @app.Pet.name</td>
                                        <td>@app.detail</td>
                                        <td style="color:teal">@app.status</td>
                                        <td style="text-align:right">
                                            <button class="ui teal basic button call_app_detail_modal" data-id="@app.id">View</button>

                                        </td>
                                        <td style="text-align:center">
                                            <button class="ui blue basic button call_edit_app_modal" data-id="@app.id">Edit</button>

                                        </td>
                                        <td style="text-align:left">
                                            <button class="ui red basic button delete_app_button" data-id="@app.id">Delete</button>

                                        </td>


                                        <div class="ui modal" id="appWait_detail_modal_@app.id" style="left:60%;width:40%">
                                            <i class="close icon" style="color:black;top:0rem;right:0rem"></i>
                                            <div class="content">
                                                <div class="ui items">

                                                    <div class="item">
                                                        <div class="image" style="border-right: 8px teal solid;font-size:22px;text-align: center;padding-top:25px">
                                                            <div class="ui statistic">
                                                                <div class="value">
                                                                    @app.date.ToString("dd")
                                                                </div>
                                                                <div class="label" style="font-weight:lighter">
                                                                    @app.date.ToString("MMM") , @app.date.ToString("yyyy")
                                                                </div>
                                                            </div>

                                                        </div>
                                                        <div class="content" style="font-size:16px">
                                                            <p><text style="font-weight:bolder"><i class="paw icon"></i>Pet name :</text> @app.Pet.name    [ @app.Pet.PetType.name ]</p>
                                                            <p><text style="font-weight:bolder"><i class="user icon"></i>Owner:</text> @app.Member.name @app.Member.surname</p>
                                                            <p><text style="font-weight:bolder"><i class="call icon"></i>Contact number :</text> @app.Member.phonenumber</p>
                                                            <div class="ui divider"></div>

                                                            <p>
                                                                <text style="font-weight:bolder">Detail : </text> @app.detail
                                                            </p>
                                                            <div class="ui divider"></div>
                                                            <p>
                                                                <text style="font-weight:bolder"> Preparation :</text>  @app.suggestion
                                                            </p>
                                                        </div>
                                                    </div>
                                                </div>




                                            </div>
                                        </div>
                                        <div id="edit_app_modal_@app.id" class="ui modal" style="left: 60%;width: 40%;margin-top: -114.5px;">
                                            <div class="header">
                                                Edit Appointment
                                            </div>

                                            <div class="content">

                                                <div class="ui form" id="edit_app_form">
                                                    <div class="field">
                                                        <label>Appointment date<text style="color:darkred"> ( Can't change )</text></label>
                                                        <div class="ui calendar calendar_date">
                                                            <div class="ui disabled input left icon">
                                                                <i class="time icon"></i>
                                                                <input type="text" name="date" value="@app.date">
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="field">
                                                        <label>Pet name <text style="color:darkred"> ( Can't change )</text></label>
                                                        <div class="ui disabled input left icon">
                                                            <i class="paw icon"></i>
                                                            <input type="text" name="petName" value="@app.Pet.name">
                                                        </div>

                                                    </div>
                                                    <div class="field">
                                                        <label>Short detail</label>
                                                        <input name="detail" type="text" id="edit_detail_@app.id" value="@app.detail">
                                                    </div>
                                                    <input type="hidden" id="edit_app_@app.id" value="@app.id">
                                                    <div class="field">
                                                        <label>Suggestion before come to clinic</label>
                                                        <input name="suggestion" type="text" id="edit_suggestion_@app.id" value="@app.suggestion">
                                                    </div>
                                                    <div class="ui error message"></div>

                                                </div>
                                            </div>
                                            <div class="actions">
                                                <div class="ui black deny button">
                                                    Cancel
                                                </div>
                                                <div class="ui tiny green basic button confirm_edit_app_button" value="@app.id">
                                                    <i class="checkmark icon"></i>
                                                    Confirm
                                                </div>
                                            </div>
                                        </div>
                                    </tr>
                                }
                            }

                        </tbody>
                    </table>
                                }
                                else
                                {  <div style="text-align:center"> No Appointment</div>}
            </div>
            <div class="ui segment">

                @* --Complete monthly appointment-- *@
                <div class="ui grey large label">
                    Complete appointment
                </div>

                @{if (mAppCom != null && mAppCom.ToList().Count > 0)
            {
                        <table class="ui single line selectable  table" style="border:none!important">
                            <thead>
                                <tr>
                                    <th class="one wide">Date</th>
                                    <th class="two wide">Member name</th>
                                    <th class="two wide">Pet name</th>
                                    <th class="four wide">Detail</th>
                                    <th class="one wide">Status</th>
                                    <th class="two wide" style="text-align:center">View</th>
                                    <th class="two wide" style="text-align:center">Delete</th>
                                    <th class="two wide"></th>
                                </tr>
                            </thead>
                            <tbody>
                                @* Complete monthly appointment *@
                                @{


                                    foreach (var app in mAppCom)
                                    {
                                        <tr>
                                            <td>@app.date.ToString("d")</td>
                                            <td>@app.Member.name  @app.Member.surname</td>
                                            <td> @app.Pet.name</td>
                                            <td>@app.detail</td>
                                            <td style="color:red">@app.status</td>
                                            <td style="text-align:right">
                                                <button class="ui teal basic button  call_app_detail_modal" data-id="@app.id">View</button>
                                            </td>
                                            <td style="text-align:center">
                                                <button class="ui red basic button delete_app_button" data-id="@app.id">Delete</button>
                                            </td>
                                            <td style="text-align:left"></td>
                                            <div class="ui modal" id="appWait_detail_modal_@app.id" style="left:60%;width:40%">
                                                <i class="close icon" style="color:black;top:0rem;right:0rem"></i>
                                                <div class="content">
                                                    <div class="ui items">

                                                        <div class="item">
                                                            <div class="image" style="border-right: 8px teal solid;font-size:22px;text-align: center;padding-top:25px">
                                                                <div class="ui statistic">
                                                                    <div class="value">
                                                                        @app.date.ToString("dd")
                                                                    </div>
                                                                    <div class="label" style="font-weight:lighter">
                                                                        @app.date.ToString("MMM") , @app.date.ToString("yyyy")
                                                                    </div>
                                                                </div>

                                                            </div>
                                                            <div class="content" style="font-size:16px">
                                                                <p><text style="font-weight:bolder"><i class="paw icon"></i>Pet name :</text> @app.Pet.name    [ @app.Pet.PetType.name ]</p>
                                                                <p><text style="font-weight:bolder"><i class="user icon"></i>Owner:</text> @app.Member.name @app.Member.surname</p>
                                                                <p><text style="font-weight:bolder"><i class="call icon"></i>Contact number :</text> @app.Member.phonenumber</p>
                                                                <div class="ui divider"></div>

                                                                <p>
                                                                    <text style="font-weight:bolder">Detail : </text> @app.detail
                                                                </p>
                                                                <div class="ui divider"></div>
                                                                <p>
                                                                    <text style="font-weight:bolder"> Preparation :</text>  @app.suggestion
                                                                </p>
                                                            </div>
                                                        </div>
                                                    </div>




                                                </div>
                                            </div>
                                        </tr>

                                    }
                                }


                            </tbody>
                        </table>

                                    }
                                    else
                                    {  <div style="text-align:center"> No Appointment</div>}

                }

            </div>
        </div>
    </div>
</div>